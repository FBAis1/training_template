
1. ê³µí†µ ìŠ¤í‚¤ë§ˆ (Event, Command)
eventSchema (28~58í–‰): ê²Œì„ ì´ë²¤íŠ¸ êµ¬ì¡° ì •ì˜ (id, text, type, tags, effects ë“±)
commandSchema (60~82í–‰): í–‰ë™ ì»¤ë§¨ë“œ êµ¬ì¡° ì •ì˜ (id, name, icon, staminaCost, stressGain, statEffects ë“±)
2. ìºë¦­í„° ìƒì„± ìŠ¤í‚¤ë§ˆ (generateCharacter)
ìœ„ì¹˜: 133~167í–‰
êµ¬ì¡°:
character: ì´ë¦„, ë°°ê²½, í…Œë§ˆ(ìƒ‰ìƒ), ìŠ¤íƒ¯(ë°°ì—´), ì»¤ë§¨ë“œ(ë°°ì—´)
initialEvents: ì´ˆê¸° ì´ë²¤íŠ¸ ë°°ì—´ (eventSchema ì‚¬ìš©)
3. ì—”ë”© ìƒì„± ìŠ¤í‚¤ë§ˆ (generateEnding)
ìœ„ì¹˜: 269~280í–‰
êµ¬ì¡°:
ending: ë¬¸ìì—´ (1,500ì ì´ìƒì˜ ê²°ë§)
summary: ë¬¸ìì—´ ë°°ì—´ (5ê°€ì§€ í•µì‹¬ ìš”ì•½)







  const responseSchema = {
    type: Type.OBJECT,
    properties: {
      character: {
        type: Type.OBJECT,
        properties: {
          name: { type: Type.STRING },
          bio: { type: Type.STRING },
          theme: {
            type: Type.OBJECT,
            properties: { primaryColor: { type: Type.STRING }, accentColor: { type: Type.STRING }, backgroundColor: { type: Type.STRING } },
            required: ["primaryColor", "accentColor", "backgroundColor"]
          },
          stats: {
            type: Type.ARRAY,
            items: {
              type: Type.OBJECT,
              properties: { key: { type: Type.STRING }, name: { type: Type.STRING }, value: { type: Type.NUMBER }, icon: { type: Type.STRING, description: "ë‹¨ì¼ ì´ëª¨ì§€ (ì˜ˆ: ğŸ’ª)" } },
              required: ["key", "name", "value", "icon"]
            }
          },
          commands: {
            type: Type.ARRAY,
            items: commandSchema
          }
        },
        required: ["name", "bio", "stats", "commands", "theme"]
      },
      initialEvents: {
        type: Type.ARRAY,
        items: eventSchema
      }
    },
    required: ["character", "initialEvents"]
  };




    const response = await withTimeout<GenerateContentResponse>(
      ai.models.generateContent({
        model: modelName,
        contents: prompt,
        config: {
            responseMimeType: "application/json",
            temperature: temperature,
            responseSchema: {
                type: Type.OBJECT,
                properties: {
                    ending: { type: Type.STRING, description: "1,500ì ì´ìƒì˜ í’ë¶€í•œ ì¸ìƒ ê²°ë§ ì„œì‚¬ (Markdown í˜•ì‹)" },
                    summary: { 
                        type: Type.ARRAY, 
                        items: { type: Type.STRING },
                        description: "ìƒì• ì˜ 5ê°€ì§€ í•µì‹¬ ì‚¬ê±´ ìš”ì•½ ëª©ë¡"
                    }
                },
                required: ["ending", "summary"]
            }
        }
      }),
      GEN_TIMEOUT_MS
    );


